<!DOCTYPE html>

<html>

<title>Команды консоли для удаленой помощи</title>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="style/CommandStyle.css">
<font  size="5" color="black">
<p align="right">
OOO "СТЭЛС"
</p>
</font>
<input type="button" onclick="history.back();" value="Назад"/>
<font align="left" size="6" color="Black">
<div class="god">
<h3  class="got">
Команды консоли для удаленой помощи:
<hr width="60%" align="left" color="green" size ="3" noshade>
</h3>
</div>
</font>
</head>

<style>
a:link {color:black;text-decoration:none;} /* не посещенная ссылка */
a:visited {color:black;text-decoration:none;} /* посещенная ссылка */
a:hover {color:green;text-decoration:none;} /* ссылка при наведении на нее мышкой */
a:active {color:black;text-decoration:none;} /* нажатая ссылка */
</style>

<body background="img/2.jpg"}>

<h2>[MYSQL]</h2>


<h6>Лечение mysql:</h6>
<h5><span class="ramka-long">service nes stop && service sync-core2 stop && service qpidd stop && service mysql restart && pkill artix-gui && sudo mysql -e "drop database dictionaries"</span></h5>
<hr noshade width="40%" align="left">

<h6>Проверка наличия справочника в БД кассы по имени товара:</h6>
<h5><span class="ramka-long">mysql -e "use dictionaries; select name,minprice from tmc WHERE name LIKE '%ТАЕЖНАЯ%';"</span></h5>
<hr noshade width="40%" align="left">

<h6>Проверка наличия справочника в БД кассы по штрих-коду:</h6>
<h5><span class="ramka-long">mysql -e "use dictionaries; select name, barcode from barcodes WHERE barcode LIKE '4600855118279';"</span></h5>
<hr noshade width="40%" align="left">


<h2>[QPID]</h2>


<h6>Лечение очереди(после выполнения перезапустить кассу):</h6>
<h5><span class="ramka-long">service sync-core2 stop && service qpidd stop && rm -r /var/spool/qpid/* && service qpidd start && service sync-core2 start && rm -f /var/log/*.gz && rm -f /var/log/*.log.?</span></h5>
<hr noshade width="40%" align="left">

<h6>Удаление очереди qpid:</h6>
<h5><span class="ramka-long">qpid-config del queue artix.loaddict.cash --force && service nes restart && sudo /etc/init.d/qpidd restart</span></h5>
<hr noshade width="40%" align="left">


<h2>[УДАЛИТЬ ЧЕК]</h2>



<h6>Удалить CHECK.IMG:</h6>
<h5><span class="ramka-long">rm -f /linuxcash/cash/data/tmp/check.img && pkill artix-gui</span></h5>
<hr noshade width="40%" align="left">


<h2>[СКАНИРОВАНИЕ В МОНИТОР КАССИРА ЧЕРЕЗ КОНСОЛЬ]</h2>


<h6>Сначала надо установить XDOTOOL на кассу:</h6>
<h5><span class="ramka-long">apt install xdotool</span></h5>
<hr noshade width="40%" align="left">



<h6>Сканирование штрих-кодов через консоль:</h6>
<h5><span class="ramka-long">DISPLAY=:0 XAUTHORITY=/home/autologon/.Xauthority sudo -u autologon xdotool type 4600855118279</span></h5>
<hr noshade width="40%" align="left">
<h6>Запуск скрипта ПЕРВАЯ ПОМОЩЬ:</h6>
<h5><span class="ramka-long">sudo DISPLAY=:0 XAUTHORITY=/home/autologon/.Xauthority sudo -u autologon /opt/FirstHelpAndScan/windows.py</span></h5>
<hr noshade width="40%" align="left">


<h2>[ОПЕРАЦИИ НА КС]</h2>


<h6>Запуск всех служб:</h6>
<h5><span class="ramka-long">sudo start virgo && sudo start mongodb && sudo start nes && sudo start exchangers-soap-upload && sudo start exchangers-rest-upload && sudo start exchangers-upload && sudo start exchangers-unload && sudo /etc/init.d/qpidd start && sudo start mysql</span></h5>
<hr noshade width="40%" align="left">

<h6>Остановка всех служб:</h6>
<h5><span class="ramka-long">sudo stop virgo && sudo stop mongodb && sudo stop nes && sudo stop exchangers-soap-upload && sudo stop exchangers-rest-upload && sudo stop exchangers-upload && sudo stop exchangers-unload && sudo /etc/init.d/qpidd stop</span></h5>
<hr noshade width="40%" align="left">

<h6>Поиск IP на КС по FSRAR</h6>
<h5><span class="ramka-long">cat /etc/openvpn/ipp.txt | grep 766645</span></h5>
<hr noshade width="40%" align="left">

<h6>Удалить сертификат VPN:</h6>
<h5><span class="ramka-long">&#10102; cd /opt/certificate</span></h5><br>
<h5><span class="ramka-long">&#10103; svn del cash-30000111111.crt cash-300000111111.csr cash-30000111111.key (Это пример, вставляем свои FSRAR)</span></h5><br>
<h5><span class="ramka-long">&#10104; svn commit -m 'del bag cert'</span></h5><br>
<hr noshade width="40%" align="left">

<h6>Создать сертификат VPN:</h6>
<h5><span class="ramka-long">&#10102; cd /opt/certificate</span></h5><br>
<h5><span class="ramka-long">&#10103; ./gencert.sh cash-30000111111 (Это пример, вставляем свои FSRAR)</span></h5><br>



<h2>[ЛОГ ФАЙЛЫ]</h2>


<h6>Удаление log-файлов с /var/log/</h6>
<h5><span class="ramka-long">rm -f /var/log/*.gz && rm -f /var/log/*.log.?</span></h5>
<hr noshade width="40%" align="left">

<h6>Проверить размер директории с логами</h6>
<h5><span class="ramka-long">&#10102; Размер папки с логами:                                        du -h /var/log/</span></h5><br>
<h5><span class="ramka-long">&#10103; Размер всех файлов лежащих в папке с логами:                  du -h /var/log/*</span></h5><br>
<h5><span class="ramka-long">&#10104; Показать все файлы в папке /var/log/ вещающие в мегабайтах:   du -h /var/log/* | grep M</span></h5><br>
<hr noshade width="40%" align="left">


<h2>[ПОДТВЕРЖДЕНИЕ НАКЛАДНЫХ]</h2>


<h6>Подтвердить накладные через консоль на кассе:</h6>
<h5><span class="ramka-long">/root/easyegais22/easyegais2.sh  /root/easyegais22</span></h5>
<hr noshade width="40%" align="left">


<h2>[PUPPET]</h2>


<font align="Right" size="4" color="black">
<h6>Удаление сертификатов SSH с PUPPET(Заходить надо на сервер Puppet):</h6>
<h5><span class="ramka-long">puppet cert clean cash-20000222222-200002222221</span></h5>
<hr noshade width="40%" align="left">
<h6>Удаление сертификатов SSL с PUPPET(На самой кассе):</h6>
<h5><span class="ramka-long">find /var/lib/puppet/ssl -name cash-20000222222-200002222221.pem -delete</span></h5>
<hr noshade width="40%" align="left">

<h2>[ПРОЧИЕ ВСПОМОГАТЕЛЬНЫЕ КОМАНДЫ]</h2>



<h6>Поиск во всех файлах в директории фразы:</h6>
<h5><span class="ramka-long">grep -r "ЧЕК" /linuxcash/cash/reports/</span></h5>
<hr noshade width="40%" align="left">

<h6>Запустить ротирование логов:</h6>
<h5><span class="ramka-long">logrotate -f /etc/logrotate.conf</span></h5>
<hr noshade width="40%" align="left">

<h6>Установка Xserver:</h6>
<h5><span class="ramka-long">sudo aptitude install x11-xserver-utils</span></h5>
<hr noshade width="40%" align="left">


<h2>[Горячие Клавиши на кассах]</h2>

<img src="File/14.png" alt="Горячие Клавиши на кассах">

<br>
<input type="button" onclick="history.back();" value="Назад"/>
<br><br><br><br>
</body>
</html>